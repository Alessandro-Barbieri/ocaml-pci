<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Pci" rel="Chapter" href="Pci.html"><title>Pci</title>
</head>
<body>
<div class="navbar">&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;</div>
<h1>Module <a href="type_Pci.html">Pci</a></h1>

<pre><span class="keyword">module</span> Pci: <code class="code">sig</code> <a href="Pci.html">..</a> <code class="code">end</code></pre><div class="info module top">
A wrapper library around bindings to <code class="code">libpci</code>.
<p>

    <code class="code">Pci</code> exposes a subset of the functionality of <code class="code">libpci</code> as part of
    "<a href="http://mj.ucw.cz/sw/pciutils/"> The PCI Utilities</a>" package shipped with
    most operating systems.
<p>

    Rather than being a completely transparent set of bindings, this library
    exposes an API to wrap some of the composite functions to ensure correct
    memory allocation and cleanup. This should reduce memory leaks and
    segfaults which are possible with incorrect use of <code class="code">libpci</code>.<br>
</div>
<hr width="100%">

<pre><span class="keyword">module</span> <a href="Pci.Pci_dev.html">Pci_dev</a>: <code class="code">sig</code> <a href="Pci.Pci_dev.html">..</a> <code class="code">end</code></pre>
<pre><span class="keyword">module</span> <a href="Pci.Pci_access.html">Pci_access</a>: <code class="code">sig</code> <a href="Pci.Pci_access.html">..</a> <code class="code">end</code></pre>
<pre><span id="VALlookup_class_name"><span class="keyword">val</span> lookup_class_name</span> : <code class="type"><a href="Pci.Pci_access.html#TYPEt">Pci_access.t</a> -> int -> string</code></pre><div class="info ">
<code class="code">lookup_class_name a id</code> wraps pci_lookup_name with the right flags to
    lookup the name for the class whose identifier is <code class="code">id</code> using the access
    value <code class="code">a</code>. If <code class="code">libpci</code> cannot find a match it returns "Class <code class="code">id</code>".<br>
</div>

<pre><span id="VALlookup_progif_name"><span class="keyword">val</span> lookup_progif_name</span> : <code class="type"><a href="Pci.Pci_access.html#TYPEt">Pci_access.t</a> -> int -> int -> string</code></pre><div class="info ">
<code class="code">lookup_progif_name a c_id id</code> is like <a href="Pci.html#VALlookup_class_name"><code class="code">Pci.lookup_class_name</code></a> but returns
    the name of the programming interface with ID <code class="code">id</code> within the class with ID
    <code class="code">c_id</code>.<br>
</div>

<pre><span id="VALlookup_vendor_name"><span class="keyword">val</span> lookup_vendor_name</span> : <code class="type"><a href="Pci.Pci_access.html#TYPEt">Pci_access.t</a> -> int -> string</code></pre><div class="info ">
<code class="code">lookup_vendor_name a id</code> is like <a href="Pci.html#VALlookup_class_name"><code class="code">Pci.lookup_class_name</code></a> but returns
    the name of the PCI vendor with ID <code class="code">id</code>.<br>
</div>

<pre><span id="VALlookup_device_name"><span class="keyword">val</span> lookup_device_name</span> : <code class="type"><a href="Pci.Pci_access.html#TYPEt">Pci_access.t</a> -> int -> int -> string</code></pre><div class="info ">
<code class="code">lookup_device_name a v_id id</code> is like <a href="Pci.html#VALlookup_class_name"><code class="code">Pci.lookup_class_name</code></a> but returns
    the name of the device with ID <code class="code">id</code> by the vendor with ID <code class="code">v_id</code>.<br>
</div>

<pre><span id="VALlookup_subsystem_vendor_name"><span class="keyword">val</span> lookup_subsystem_vendor_name</span> : <code class="type"><a href="Pci.Pci_access.html#TYPEt">Pci_access.t</a> -> int -> string</code></pre><div class="info ">
<code class="code">lookup_subsystem_vendor_name a id</code> is like <a href="Pci.html#VALlookup_class_name"><code class="code">Pci.lookup_class_name</code></a> but
    returns the name of the PCI vendor with ID <code class="code">id</code>.<br>
</div>

<pre><span id="VALlookup_subsystem_device_name"><span class="keyword">val</span> lookup_subsystem_device_name</span> : <code class="type"><a href="Pci.Pci_access.html#TYPEt">Pci_access.t</a> -> int -> int -> int -> int -> string</code></pre><div class="info ">
<code class="code">lookup_subsystem_device_name a v_id d_id sv_id sd_id</code> is like
    <a href="Pci.html#VALlookup_class_name"><code class="code">Pci.lookup_class_name</code></a> but returns the name of the PCI subsystem of a device
    with ID <code class="code">d_id</code> made by vendor with ID <code class="code">v_id</code> whose subvendor and subdevice
    IDs are <code class="code">sv_id</code> and <code class="code">sd_id</code> respectively.<br>
</div>

<pre><span id="VALwith_access"><span class="keyword">val</span> with_access</span> : <code class="type">?cleanup:bool -> ?from_dump:string -> (<a href="Pci.Pci_access.html#TYPEt">Pci_access.t</a> -> 'a) -> 'a</code></pre><div class="info ">
<code class="code">with_access ~cleanup f</code> wraps the <code class="code">libpci</code> calls to <code class="code">pci_alloc</code>,
    <code class="code">pci_init</code> and <code class="code">pci_cleanup</code> and constructs <code class="code">(access:Pci_access.t)</code> and
    returns <code class="code">f access</code>. If <code class="code">cleanup</code> is <code class="code">true</code> (default), <code class="code">pci_cleanup</code> is
    called to ensure the allocated <code class="code">access</code> is not leaked and in the case where
    <code class="code">f a</code> raises an exception <code class="code">exn</code>, <code class="code">pci_cleanup</code> is still called and <code class="code">exn</code> is
    re-raised.<br>
</div>

<pre><span id="VALget_devices"><span class="keyword">val</span> get_devices</span> : <code class="type"><a href="Pci.Pci_access.html#TYPEt">Pci_access.t</a> -> <a href="Pci.Pci_dev.html#TYPEt">Pci_dev.t</a> list</code></pre><div class="info ">
<code class="code">get_devices a</code> returns a list of devices found on the PCI bus for access
    value <code class="code">a</code>. It wraps the <code class="code">libpci</code> call to <code class="code">pci_scan_bus</code> and calls
    <code class="code">pci_fill_info</code> for each of the devices on the bus before returning a list
    of <code class="code">Pci_dev.t</code>.<br>
</div>
</body></html>